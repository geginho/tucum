(function(){var b=document.getElementsByTagName("HTML")[0];var a=navigator.userAgent.toLowerCase();a=a.indexOf("msie")!=-1?parseInt(a.split("msie")[1]):false;if(a==9){b.className+=" ie9"}})();if(typeof convertHex!="function"){function convertHex(f,c){c=c==""?75:c;var e,d,a;f=f.replace("#","");c=c>1?c/100:c;e=parseInt(f.substring(0,2),16);d=parseInt(f.substring(2,4),16);a=parseInt(f.substring(4,6),16);return"rgba("+e+","+d+","+a+","+c+")"}}jQuery.extend(jQuery.easing,{easeOutExpo:function(e,f,a,h,g){return(f==g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a}});(function(f){var d=f(".rfbwp-shelf").length>0;var e=f(".rfbwp-popup-book").length>0;function c(i,h){var g=h.find(".flipbook.rfbwp-init").first();var j=f(".flipbook").length-1;if(g.length){d=f(".rfbwp-shelf").length>0;e=f(".rfbwp-popup-book").length>0;a(j,g);g.removeClass("rfbwp-init");g.parent().addClass("rfbwp-inited");f(window).trigger("rfbwp.refocus-flipbook")}}function b(){f(".flipbook.rfbwp-init").each(function(h){d=f(".rfbwp-shelf").length>0;e=f(".rfbwp-popup-book").length>0;var g=f(this);a(h,g);g.removeClass("rfbwp-init");g.parent().addClass("rfbwp-inited")})}function a(Q,v){var g=[],L=3,S=2,N=2000,M,s=true;var R=false,z=false,q="ontouchstart" in window,G=0,H=0,o="right",J=false,E=false,w=false,P=f(window),A=f("html, body");if(window.rfbwp_ie_8!=undefined){R=true}if(P.width()<=769){z=true}function i(){var X=C(),V,W=/^\d+$/;if(X===0){X=1}if(W.test(X)){V=X}else{V=1}return V}function F(){return window.location.href.split("#").shift()}function p(){return window.location.hash.slice(1)}function C(){var Y=p(),W="fb"+Q,X;if(Y.indexOf(",")!=-1){Y=Y.split(",");for(var V=0;V<Y.length;V++){if(Y[V].search(W)!=-1){X=Y[V].replace(W+"=","")}}}else{if(Y!=""){if(Y.indexOf(W)!=-1){X=Y.replace(W+"=","")}else{X=0}}else{X=0}}return X}function U(Y){var X=p(),W="fb"+Q;if(X.indexOf(",")!=-1){X=X.split(",");for(var V=0;V<X.length;V++){if(X[V].search("fb"+Q)!=-1){X[V]=W+"="+Y}}X=X.join(",")}else{if(X!=""){if(X.indexOf(W)!=-1){X=W+"="+Y}else{X+=","+W+"="+Y}}else{X=W+"="+Y}}return X}function T(V){var X=V.turn("page"),W;if(X%2!=0){W=F()+"#"+U(X)}else{if(X==V.data().totalPages){W=F()+"#"+U(X)}else{W=F()+"#"+U(X+1)}}if(!d&&!e){window.location.href=W}}function D(Y,X){var Z=C(),V=Y.position();Z=parseInt(Z);if(Z==0||(Z==Y.turn("page")&&Z!=Y.data().totalPages)){return}var W=Y.siblings(".rfbwp-cover-wrap");if(W.length){if(Z==Y.data().totalPages){W.parent().attr("data-display","back")}else{W.parent().attr("data-display","inside");W.filter(".rfbwp-front").children(".rfbwp-cover").addClass("rfbwp-active")}W.addClass("rfbwp-both").removeClass("rfbwp-left");Y.data().fauxCenter=true;if(!z){Y.turn("updateOptions",{cornerSize:100})}}if(Y.data().opt.force_open){Z=Math.max(Math.min(Z,Y.data().totalPages-1),3)}w=true;if(Z==Y.data().totalPages){Y.turn("page",Z)}else{if(Z%2!=0){Y.turn("page",Z)}else{Y.turn("page",(Z+1))}}}function x(V){V.find("div.even div.fb-page").prepend('<div class="fb-inside-shadow-left"></div>');V.find("div.odd div.fb-page").prepend('<div class="fb-inside-shadow-right"></div>');V.find("div.last div.fb-page").prepend('<div class="fb-inside-shadow-left"></div>');V.find("div.first div.fb-page").prepend('<div class="fb-inside-shadow-right"></div>');V.find("div.even div.fb-page").prepend('<div class="fb-page-edge-shadow-left"></div>');V.find("div.odd div.fb-page").prepend('<div class="fb-page-edge-shadow-right"></div>');V.append('<div class="fb-shadow-bottom-left"></div>');V.append('<div class="fb-shadow-bottom-right"></div>');V.append('<div class="fb-shadow-top-left"></div>');V.append('<div class="fb-shadow-top-right"></div>')}function m(Z,ab,Y,W,V){var aa=Y.turn("page"),ac,X=false;if(X){return}if(!isNaN(V)){X=true}if(Z=="start"||X){ac=Y.activePageCorner()}if((Z=="start"&&ac!="tl"&&ac!="bl"&&ac!="tr"&&ac!="br")||(X&&ac!="tl"&&ac!="bl"&&ac!="tr"&&ac!="br")){ac=ab}if(aa+2>=Y.data().totalPages&&(ac=="right"||ac=="tr"||ac=="br")&&Z!="start"){Y.children("div.fb-shadow-top-right").css("opacity",0);Y.children("div.fb-shadow-bottom-right").css("opacity",0)}else{if(aa<=3&&(ac=="left"||ac=="tl"||ac=="bl")&&Z!="start"){Y.children("div.fb-shadow-top-left").css("opacity",0);Y.children("div.fb-shadow-bottom-left").css("opacity",0)}}Y.children("div.fb-shadow-top-left").stop(true);Y.children("div.fb-shadow-bottom-left").stop(true);Y.children("div.fb-shadow-top-right").stop(true);Y.children("div.fb-shadow-bottom-right").stop(true);if(aa==2&&X&&(ac=="tl"||ac=="bl"||ac=="left")){Y.children("div.fb-shadow-top-left").animate({opacity:0},200);Y.children("div.fb-shadow-bottom-left").animate({opacity:0},200)}else{if(aa==Y.data().totalPages-2&&X&&(ac=="tr"||ac=="br"||ac=="right")){Y.children("div.fb-shadow-top-right").animate({opacity:0},200);Y.children("div.fb-shadow-bottom-right").animate({opacity:0},200)}}if(X){return}if(aa==2&&(ac=="tl"||ac=="bl"||ac=="left")){Y.children("div.fb-shadow-top-left").animate({opacity:0},200);Y.children("div.fb-shadow-bottom-left").animate({opacity:0},200)}else{if(aa!=1){Y.children("div.fb-shadow-top-left").animate({opacity:1},500);Y.children("div.fb-shadow-bottom-left").animate({opacity:1},500)}else{Y.children("div.fb-shadow-top-left").animate({opacity:0},200);Y.children("div.fb-shadow-bottom-left").animate({opacity:0},200)}}if(aa==Y.data().totalPages-2&&(ac=="tr"||ac=="br"||ac=="right")){Y.children("div.fb-shadow-top-right").animate({opacity:0},200);Y.children("div.fb-shadow-bottom-right").animate({opacity:0},200)}else{if(aa!=Y.data().totalPages){Y.children("div.fb-shadow-top-right").animate({opacity:1},500);Y.children("div.fb-shadow-bottom-right").animate({opacity:1},500)}else{Y.children("div.fb-shadow-top-right").animate({opacity:0},200);Y.children("div.fb-shadow-bottom-right").animate({opacity:0},200)}}}function l(){return Math.abs(window.orientation)==90}function u(ad,aa,W,ae){var X=aa.find(".fb-nav"),Z=X.find(".main-nav"),ac=X.find(".alternative-nav"),ab;if(ae=="zoom"){ab=aa.find(".show-previous, .show-next, .fb-zoom-out")}else{if(ae=="show-all"){ab=aa.find(".show-all-previous, .show-all-next, .show-all-close")}}if(W=="exit"){h(ac,ab,aa);k(ad,Z,aa)}else{t(Z,aa);O(ad,ac,ab,aa,ae)}var Y=aa.find(".fb-nav"),V=aa.parent().is("#rfbwp_fullscreen, .rfbwp-shelf-wrap, .rfbwp-popup-wrap");if(W=="exit"){if(V&&Y.hasClass("aside")&&!z){Y.css("margin-top",-(Y.height()*0.5)-ad.css("margin-top").replace("px",""))}else{if(Y.hasClass("aside")){Y.css("margin-top",-(Y.height()*0.5))}}}else{if(V&&Y.hasClass("aside")&&!z){Y.css("margin-top",-(Y.find(".alternative-nav").height()*0.75)-ad.css("margin-top").replace("px",""))}else{if(Y.hasClass("aside")){Y.css("margin-top",-(Y.find(".alternative-nav").height()*0.75))}}}}function k(W,aa,Y){var Z=W.turn("page"),V=W.data().totalPages,X=W.data().opt.force_open;aa.css("visibility","visible");aa.stop(true,true).animate({opacity:1},300);if(X){Z=(Z-2<=1)?1:Z;Z=(Z+2>=V)?V:Z}if(!W.data().fauxCenter||X){if(Z==1){Y.find(".preview").css("display","none");Y.find(".next").css("display","inline-block");Y.find(".next").stop(true,true).animate({opacity:1},300)}else{if(Z==V){Y.find(".next").css("display","none");Y.find(".preview").css("display","inline-block");Y.find(".preview").stop(true,true).animate({opacity:1},300)}else{Y.find(".preview, .next").css("display","inline-block");Y.find(".preview, .next").stop(true,true).animate({opacity:1},300)}}}else{Y.find(".preview, .next").css("display","inline-block");Y.find(".preview, .next").stop(true,true).animate({opacity:1},300)}}function t(W,V){W.stop(true,true).animate({opacity:0},300,function(){W.css("visibility","hidden")});V.find(".preview, .next").stop(true,true).animate({opacity:0},300,function(){f(this).css("display","none")})}function O(ac,aa,Z,X,ad){var W=ac.turn("page"),ab=ac.data().totalPages,V=ac.data().opt.force_open,Y=X.find(".fb-nav").data("grouped");aa.find("li").removeClass("active border-single").css({opacity:0});if(!Y){if(ad=="zoom"){aa.find(".fb-zoom-out").addClass("border-single")}else{aa.find(".show-all-close").addClass("border-single")}}Z.addClass("active").stop(true,true).animate({opacity:1},300);if(ad=="zoom"){if(V){W=(W-2<=1)?1:W;W=(W+2>=ab)?ab:W}if(W==1){X.find(".show-previous").removeClass("active");X.find(".show-next").addClass("active");X.find(".show-next").stop(true,true).animate({opacity:1},300)}else{if(W==ab){X.find(".show-next").removeClass("active");X.find(".show-previous").addClass("active");X.find(".show-previous").stop(true,true).animate({opacity:1},300)}else{X.find(".show-previous, .show-next").addClass("active");X.find(".show-previous, .show-next").stop(true,true).animate({opacity:1},300)}}}aa.css("visibility","visible");aa.stop(true,true).animate({opacity:1},300)}function h(W,V){W.stop(true,true).animate({opacity:0},300,function(){W.css("visibility","hidden")});V.stop(true,true).animate({opacity:0},300,function(){V.removeClass("active")})}function r(W,V){W.find(".page-html *:not(.no-scale), .mpc-numeration-wrap span").each(function(){var Y=f(this);if(typeof Y.data("_scale")!="undefined"){var X=Y.data("_scale");if(Y.is("img")){Y.css({width:X.width*V+"px","margin-top":X["margin-top"]*V+"px","margin-right":X["margin-right"]*V+"px","margin-bottom":X["margin-bottom"]*V+"px","margin-left":X["margin-left"]*V+"px","padding-top":X["padding-top"]*V+"px","padding-right":X["padding-right"]*V+"px","padding-bottom":X["padding-bottom"]*V+"px","padding-left":X["padding-left"]*V+"px"})}else{if(Y.parent().hasClass("mpc-numeration-wrap")){Y.css({"font-size":X["font-size"]*V+"px","line-height":X["line-height"]*V+"px","margin-top":X["margin-top"]*V+"px","margin-right":X["margin-right"]*V+"px","margin-bottom":X["margin-bottom"]*V+"px","margin-left":X["margin-left"]*V+"px","padding-top":X["padding-top"]*V+"px","padding-right":X["padding-right"]*V+"px","padding-bottom":X["padding-bottom"]*V+"px","padding-left":X["padding-left"]*V+"px","border-width":X["border-width"]*V+"px","border-radius":X["border-radius"]*V+"px"})}else{Y.css({"font-size":X["font-size"]*V+"px","line-height":X["line-height"]*V+"px"})}}}})}function B(W,ag,am,X,ae,ac){var af,ab,aa=X.parent().is("#rfbwp_fullscreen, .rfbwp-shelf-wrap, .rfbwp-popup-wrap"),V=X.find(".fb-nav");am.turn("size",Math.ceil(W),Math.ceil(ag));if(X.find(".rfbwp-cover-wrap").length){var an=(V.is(".top")?V.outerHeight():0)+(V.is(".spread.top")?30:0),al=V.is(".top")?parseInt(V.css("margin-top")):parseInt(am.css("margin-top"));X.find(".rfbwp-cover-wrap").css({width:Math.ceil(W*0.5)+10,height:ag+20,top:z?al:-10,left:J?0:X.width()*0.25+15,marginTop:an});if(aa&&A.is(".ie9")){X.find(".rfbwp-cover-wrap").css("margin-top",al>10?al+an:10)}}af=W*0.5;ab=ag;if(ae){var Z=false,ad=X.find("div.zoomed"),aj=parseInt(ad.css("border-left-width")),Y=X.offset(),ai=Y.top;if(ad.find("img.bg-img").hasClass("zoom-large")){Z=true}if(!Z){ad.find("img.bg-img").css({"margin-top":"0px",opacity:1});ad.find("img.bg-img.zoom-large").css("opacity",0)}else{ad.find("img.bg-img").css("display","none");ad.find("img.bg-img.zoom-large").css({"margin-top":"0px",opacity:1,display:"block"})}ad.children(":not(.rfbwp-loader)").css("margin-top",0);if(f(this).find("div.fb-page").hasClass("double")){ad.addClass("double")}if(f(this).hasClass("odd")){ad.addClass("odd")}ad.width(am.width()*0.5*S);ad.height(am.height()-(aj*2));ad.find(" > div:not(.rfbwp-loader), > a.fb-container, img.bg-img, div.video").each(function(){var ao=f(this);if(ao.hasClass("video")){}else{if(ad.hasClass("double")){ao.width(100*S+"%");ao.height(am.find("div.first").height()*S)}else{ao.width(am.find("div.first").width()*S);ao.height(am.find("div.first").height()*S)}}});var ak=ag/ac*S*0.999;r(ad,ak);X.find("div.zoomed.double.odd img.bg-img").css("margin-left","0px");X.find("div.zoomed.double img.bg-img").css({left:"0px",right:"0px"});var ah="";if(V.hasClass("top")){ah=V.outerHeight();ah=V.hasClass("spread")?ah+30:ah}ad.css({left:(X.width()-ad.outerWidth())*0.5,top:ah});X.find("div.zoomed-shadow").css({left:(parseInt(ad.css("left"))+aj),top:(parseInt(ad.css("top"))+aj)+ah,width:ad.css("width")-20,height:ad.css("height")-20});X.find("div.zoomed-shadow-top").css({left:(parseInt(ad.css("left"))+aj)+ah,width:ad.css("width")});X.find("div.zoomed-shadow-bottom").css({left:(parseInt(ad.css("left"))+aj)+ah,top:ad.height()-40+aj*2+ah,width:ad.css("width")})}am.find("div.fb-page-content").each(function(){var ap=f(this);ap.width(af-parseInt(ap.css("margin-top")));ap.height(ab-(parseInt(ap.css("margin-top"))*2));if(ap.find("object, iframe").length){ap.find(".preview-content").height("100%")}if(ap.parent().hasClass("double")){if(ap.parent().parent().parent().hasClass("odd")){var ao=parseInt(ap.css("margin-right"));ap.find("img.bg-img").css("margin-left",-ap.width()+"px");ap.find(".fb-container img.bg-img").css("margin-left","0px")}}ap.parent().find("div.fb-inside-shadow-left").height(ap.height());ap.parent().find("div.fb-inside-shadow-right").height(ap.height());ap.parent().find("div.fb-page-edge-shadow-left").height(ap.height());ap.parent().find("div.fb-page-edge-shadow-right").height(ap.height())});am.find("div.fb-shadow-bottom-left").width(W*0.5);am.find("div.fb-shadow-bottom-right").width(W*0.5);am.find("div.fb-shadow-top-left").width(W*0.5);am.find("div.fb-shadow-top-right").width(W*0.5);if(R&&!s){X.find("div.preview, div.next").css("top",am.find("div.turn-page-wrapper.first").height()-V.outerHeight())}else{if(V.hasClass("aside")){X.find("div.preview, div.next").css("top",(am.find("div.turn-page-wrapper.first").height()-V.find(".main-nav li").outerHeight())*0.5)}else{X.find("div.preview, div.next").css("top",(am.find("div.turn-page-wrapper.first").height()-V.outerHeight())*0.5)}}}function I(ab,ad,X,V){if(!J){return}var Y=ad.data().done,W=ad.width(),ac=W*0.5,Z=0,aa=X.find(".rfbwp-cover-wrap").length,ae={duration:(!Y)?0:600,easing:"easeOutExpo",complete:function(){ad.turn("resize")}};ad.stop(true);if(V=="left"||ab==1){Z=Math.floor((X.width()-ac)*0.5)-ac}else{Z=Math.floor((X.width()-ac)*0.5)}if(aa){X.find(".rfbwp-front, .rfbwp-back").animate({left:Z+ac},ae)}if(parseInt(ad.css("left"))!=Z){ad.animate({left:Z},ae)}}function n(ab,an,ac,ah){var ao=an.data().done,ai=an.width(),am=ai*0.5,Z=Math.floor((ac.width()-am)*0.5),ak=ac.find(".rfbwp-cover-wrap").length,ag=ac.find(".fb-page-content").hasClass("zoomed"),Y={duration:(!ao)?0:600,easing:"easeOutExpo"};if(ak&&!an.data().fauxCenter){ac.find("li.zoom").css("display","none")}else{ac.find("li.zoom").css("display","inline-block")}an.stop(true,true);if(E){E=false;Y.duration=0}if(J){if(o=="right"||ab==1){Z-=am}if(parseInt(an.css("left"))!=Z){an.stop(true).animate({left:Z},Y);m("center",ah,an,ac,Math.floor((ac.width()-am)*0.5)-am)}if(ac.find(".rfbwp-front, .rfbwp-back").length){ac.find(".rfbwp-front, .rfbwp-back").css({left:Z+am})}}else{if(an.data().fauxCenter){if(ab==1){ab=2}else{if(ab==an.data().totalPages){ab=an.data().totalPages-1}}}if((ab==1||ab==an.data().totalPages)){if(ab==1){Z-=am}if(parseInt(an.css("left"))!=Z){an.stop(true).animate({left:Z},Y);m("center",ah,an,ac,Math.floor((ac.width()-am)*0.5)-am)}}else{Z=Math.floor((ac.width()-ai)*0.5);if(parseInt(an.css("left"))!=Z){an.stop(true).animate({left:Z},Y)}m("center",ah,an,ac,Math.floor((ac.width()-ai)*0.5))}if(ac.find(".rfbwp-front, .rfbwp-back").length){ac.find(".rfbwp-front, .rfbwp-back").stop(true).animate({left:Z+am},Y)}}var al,aa,aj,W;if(R&&!s){al=Z+ai;aa=Z;aj=Z+ai;W=Z}else{al=Z+ai;aa=Z;aj=Z+ai;W=Z}var ad=ac.find(".fb-nav").hasClass("spread")?Math.floor(ac.find("div.preview").outerWidth()*0.33)+28:8,af=an.data().totalPages,V=an.data().opt.force_open;if(V){ab=(ab-2<1)?1:ab;ab=(ab+2>=af)?af:ab}ad=ac.hasClass("nav-with-cover")?ad+10:ad;if((ab==1&&!an.data().fauxCenter)||(ab<=3&&V)){ac.find(".preview, .show-previous").css({opacity:0});ac.find(".preview").css({display:"none"});ac.find(".show-previous").removeClass("active");ac.find("div.preview").stop(true,true).animate({left:W-ac.find("div.preview").outerWidth()+Math.floor(ac.find("div.preview").outerWidth()*0.33)-ad},300,"easeOutExpo")}else{ac.find("div.preview").stop(true,true).animate({left:aa-ac.find("div.preview").outerWidth()+Math.floor(ac.find("div.preview").outerWidth()*0.33)-ad},300,"easeOutExpo");if(!ag){ac.find(".preview").css({display:"inline-block"}).animate({opacity:1},300,"easeOutExpo")}if(ag){ac.find(".show-previous").addClass("active").css({opacity:1})}}if(ab==af){ac.find(".next, .show-next").css({opacity:0});ac.find(".next").css({display:"none"});ac.find(".show-next").removeClass("active");ac.find("div.next").stop(true,true).animate({left:aj-Math.floor(ac.find("div.next").outerWidth()*0.33)+ad},300,"easeOutExpo")}else{ac.find("div.next").stop(true,true).animate({left:al-Math.floor(ac.find("div.next").outerWidth()*0.33)+ad+"px"},300,"easeOutExpo");if(!ag){ac.find(".next").css({display:"inline-block"}).animate({opacity:1},300,"easeOutExpo")}if(ag){ac.find(".show-next").addClass("active").css({opacity:1})}}var X=ac.find(".fb-nav"),ae=ac.parent().is("#rfbwp_fullscreen, .rfbwp-shelf-wrap, .rfbwp-popup-wrap");if(ae&&X.hasClass("aside")&&!z){X.css("margin-top",-(X.height()*0.5))}else{if(X.hasClass("aside")){X.css("margin-top",-(X.height()*0.5))}}}function K(W,V){P.trigger("rfbwp.resize");m("turned","false",W,V,"first run");V.find(".fb-nav").animate({opacity:1},1000,"easeOutExpo");W.parent().css("background-image","none");W.find(".bg-img").css("visibility","visible");if(R){f(".page-transition").parent().addClass("page-transitions");W.turn("disable")}}function y(V){V.find("div.fb-shadow-bottom-left").stop(true).css("opacity",0);V.find("div.fb-shadow-top-left").stop(true).css("opacity",0);V.find("div.fb-shadow-bottom-right").stop(true).css("opacity",0);V.find("div.fb-shadow-top-right").stop(true).css("opacity",0)}function j(ah){var aP=ah,ar=aP.parent(),aw=ar.find("div.fb-nav"),aF=ar.find(".fb-zoom-out"),ad=f('<div id="rfbwp_fullscreen">'),aX=ar.parent(),at=false,aD=false,V=false,ap="false",ao=0,ay,ag,aW=false,ax=false,an=false,aU="ontouchstart" in document.documentElement,aR,aN,ak,am,Y=false,aE=true,aO=ar.data("turn-sound");if(aO){f.ionSound({sounds:[{name:"turn"}],volume:0.3,path:mpcthLocalize.soundsPath,preload:true})}ad.on("touchmove",function(a0){a0.preventDefault()});aP.on("click",".toc a",function(a0){a0.preventDefault();var a2=f(this).data("page"),a1=F()+"#"+U(a2);if(!d&&!e){window.location.href=a1}else{aP.turn("page",a2)}});if(R){ar.addClass("ie_fallback")}if(aP.is(".no-arrows")){s=false}ar.after(ad);aP.on("faux-turning",function(a1,a0){n(a0,aP,ar,ap)});aP.on("turning",function(a1,a0){if(a0==1){aP.children("div.fb-shadow-top-left").addClass("force-hide");aP.children("div.fb-shadow-bottom-left").addClass("force-hide")}else{aP.children("div.fb-shadow-top-left").removeClass("force-hide");aP.children("div.fb-shadow-bottom-left").removeClass("force-hide")}if(a0==aP.data().totalPages){aP.children("div.fb-shadow-top-right").addClass("force-hide");aP.children("div.fb-shadow-bottom-right").addClass("force-hide")}else{aP.children("div.fb-shadow-top-right").removeClass("force-hide");aP.children("div.fb-shadow-bottom-right").removeClass("force-hide")}an=true;n(a0,aP,ar,ap);if(!aD&&aO){f.ionSound.stop("turn");f.ionSound.play("turn")}});aP.on("turned",function(a2,a0){var a1=f(this);var a3=a1.data().done;if(!w){if(a0%2){o="right"}else{o="left"}}w=false;if(at){M=setTimeout(function(){a1.turn("next");if(aP.turn("page")+2>=aP.data().totalPages){at=false;aw.find("ul li.slideshow").removeClass("active");if(ak){setTimeout(function(){aK.click()},X)}m("start","right",aP,ar,"end")}},X)}m("turned","false",aP,ar,"end");an=false});aP.find("div.fb-page").each(function(){var a2=f(this);if(a2.hasClass("double")){var a1=a2.clone(true);if(a1.find(".mpc-numeration-wrap").data("page-number")!==undefined){var a0=a1.find(".mpc-numeration-wrap").data("page-number");a0++;a1.find(".mpc-numeration-wrap").attr("data-page-number",a0).find("span").text(a0)}a1.insertAfter(a2)}});aR=parseInt(i());am=ar.attr("data-force-open")==1;aP.turn({page:aR,acceleration:true,shadows:!f.isTouch,duration:R?0:500,cornerSize:R?0:100,force_open:am});if(R){aP.turn("updatePageOptions",{cornerSize:0})}aP.find("div.turn-page-wrapper").each(function(){var a3=f(this),a0=f(this).attr("page"),a2=aP.data().totalPages,a4;if(a0==1){a3.addClass("first");a3.find("div.fb-page-content").addClass("first")}else{if(a0==a2){a3.addClass("last");a3.find("div.fb-page-content").addClass("last")}else{if(a0%2==0){a3.addClass("even");a3.find("div.fb-page-content").addClass("even")}else{a3.addClass("odd");a3.find("div.fb-page-content").addClass("odd")}}}if(a0%2!=0&&a0!=1&&a0!=a2){var a1=parseInt(a3.find("div.double div.fb-page-content").css("margin-right"));a3.find("div.double div.fb-page-content img.bg-img").css("margin-left",-a3.width()+a1+"px");a3.find(".fb-container img.bg-img").css("margin-left","0px")}});aP.find(" > div:last-child > div").each(function(){var a0=f(this);ao++;ay=aP.data().totalPages;a0.addClass("page-transition");a0.attr("page",ao);if(ao==1){a0.addClass("first")}else{if(ao==ay){a0.addClass("last")}else{if(ao%2==0){a0.addClass("even")}else{a0.addClass("odd")}}}});var aG=aP.find("div.turn-page-wrapper > div").width(),W=aP.find("div.turn-page-wrapper > div").height();aP.find("div.turn-page-wrapper").dblclick(function(bo){var a4=S,bg,bq,br,bx,bc=false,bf=f(this),a1=aw.data("grouped");if(R){aP.turn("updateOptions",{duration:500})}if(at){at=!at;clearTimeout(M);aw.find("ul li.slideshow").removeClass("active")}bg=bf.find("div.fb-page-content").clone(true).addClass("zoomed");bg.append('<div class="rfbwp-loader"><div class="rfbwp-circle-one"></div><div class="rfbwp-circle-two"></div></div>');aP.parent().prepend(bg).css("opacity",0).animate({opacity:1},500);if(!R){aP.parent().prepend('<div class="zoomed-shadow"></div>').css("opacity",0).animate({opacity:1},500)}var bn=ar.find(".big-side.show-previous");var bp=ar.find(".big-side.show-next");if(!bp.length){var a6=aw.data("prev-icon").length?aw.data("prev-icon"):"icon-left-open",bb=aw.data("next-icon").length?aw.data("next-icon"):"icon-right-open",bw=aw.hasClass("spread")?"spread":"";if(a1||f(window).width()<=1024){bn=f('<li class="big-side show-previous"><i class="'+a6+'"></i></li>');bp=f('<li class="big-side show-next"><i class="'+bb+'"></i></li>');aw.find(".alternative-nav").prepend(bn);aw.find(".alternative-nav").append(bp)}else{bn=f('<div class="big-side show-previous '+bw+'"><i class="'+a6+'"></i></div>');bp=f('<div class="big-side show-next '+bw+'"><i class="'+bb+'"></i></div>');ar.append(bn);ar.append(bp)}}else{bn.off("click");bp.off("click")}if(z){bn.hide();bp.hide()}var ba=aw.find("ul li[data-text]");if(ba.length){var bd=0;ba.each(function(){var bz=f(this);if(bd<bz.width()){bd=bz.width()}});ar.find(".big-side").width(bd).height(bd).css("line-height",bd+"px")}f(window).width()<=1024?aT(ar):aM(ar);bn.on("click",function(bz){bz.preventDefault()});bp.on("click",function(bz){bz.preventDefault()});bn.one("click",function(bz){aN=bf.prev();bk();if(aN.css("z-index")!=bf.css("z-index")){aP.turn("updateOptions",{duration:0});aP.on("turned",bu);aP.turn("previous");aP.turn("updateOptions",{duration:600})}else{aN.dblclick()}});bp.one("click",function(bz){aN=bf.next();bk();if(aN.css("z-index")!=bf.css("z-index")){aP.turn("updateOptions",{duration:0});aP.on("turned",bu);aP.turn("next");aP.turn("updateOptions",{duration:600})}else{aN.dblclick()}});function bu(bA,bz){aP.off("turned",bu);aN.dblclick()}aP.animate({opacity:0},500,function(){aP.css({visibility:"hidden","pointer-events":"none"})});if(ak){if(aP.turn("page")==1&&!aP.data().fauxCenter){aB.click()}else{if(aP.turn("page")==aP.data().totalPages&&!aP.data().fauxCenter){aK.click()}else{if(!aP.data().fauxCenter){aB.click()}}}af.animate({opacity:0},250,function(){af.css("visibility","hidden")})}ar.find("div.next:not(.zoom), div.preview:not(.zoom)").stop(true).fadeOut(300);if(!R){aP.parent().prepend('<div class="zoomed-shadow-top"></div><div class="zoomed-shadow-bottom"></div>')}br=parseInt(bg.css("border-left-width"));var a9=ar.offset();bq=a9.top;if(bo.pageY==undefined){bo.pageY=bq}bg.children(":not(.rfbwp-loader)").css("margin-top",bq-bo.pageY);var a3=bg.find("img.bg-img.zoom-large");if(a3.length){bc=true;if(a3.attr("src")!=a3.attr("data-src")){a3.attr("src",a3.attr("data-src"))}}if(!bc){bg.find("img.bg-img").css({"margin-top":"0px",opacity:1});bg.find("img.bg-img.zoom-large").css("opacity",0)}else{bg.find("img.bg-img").css("display","none");bg.find("img.bg-img.zoom-large").css({"margin-top":"0px",opacity:1,display:"block"})}if(f(this).find("div.fb-page").hasClass("double")){bg.addClass("double")}if(f(this).hasClass("odd")){bg.addClass("odd")}var bt=a4;if(z){var a7=ar.width()-20;bt=a7/(G*0.5)}bg.width(aP.width()*0.5*bt-(br*2));bg.height(aP.height()-(br*2));var by=(aP.height()-(br*2))*bt;bg.find(" > div:not(.rfbwp-loader), > a.fb-container, div.video").each(function(){var bz=f(this);if(bg.hasClass("double")){bz.width("200%")}else{bz.width("100%")}bz.height(by)});var bh=aP.height()/H*bt*0.999;r(bg,bh);ar.find("div.zoomed.double.odd img.bg-img").css("margin-left","0px");ar.find("div.zoomed.double img.bg-img").css({left:"0px",right:"0px"});if(!aD){u(aP,ar,"show","zoom")}aD=true;var bm="";if(aw.hasClass("top")){bm=aw.outerHeight();bm=aw.hasClass("spread")?bm+30:bm}bg.css({left:(ar.width()-bg.outerWidth())*0.5,top:bm});ar.find("div.zoomed-shadow").css("left",(parseInt(bg.css("left"))+br));ar.find("div.zoomed-shadow").css("top",(parseInt(bg.css("top"))+br)+bm);ar.find("div.zoomed-shadow").css("width",bg.css("width")-br*2);ar.find("div.zoomed-shadow").css("height",bg.css("height")-br*2);var a2=parseInt(bg.css("left").replace("px","")),bs=a2+parseInt(bg.outerWidth()),bv=ar.find("div.show-previous"),a0=ar.find("div.show-next"),a8=ar.find(".fb-nav").hasClass("spread")?bv.outerWidth()*0.33+20:8;a8=ar.hasClass("nav-with-cover")?a8+10:a8;bv.css({left:a2-bv.outerWidth()-a8,"margin-top":-(bv.outerHeight()*(R?1:0.5))});a0.css({left:bs+a8,"margin-top":-(a0.outerHeight()*(R?1:0.5))});var a5=aP.turn("page"),be=aP.data().totalPages;if(am){a5=(a5-2<=1)?1:a5;a5=(a5+2>=be)?be:a5}if(a5==1){ar.find(".show-previous").removeClass("active");ar.find(".show-next").addClass("active");ar.find(".show-next").stop(true,true).animate({opacity:1},300)}else{if(a5==be){ar.find(".show-next").removeClass("active");ar.find(".show-previous").addClass("active");ar.find(".show-previous").stop(true,true).animate({opacity:1},300)}else{ar.find(".show-previous, .show-next").addClass("active");ar.find(".show-previous, .show-next").stop(true,true).animate({opacity:1},300)}}aF.on("click",bi);var bl=bg.outerHeight(),bj=parseInt(bg.css("left"));if(!z&&aU){bg.addSwipeEvents().on("doubletap",function(bz,bA){bi()}).on("swipeleft",function(){if(!bf.is(".last")){bp.click()}}).on("swiperight",function(){if(!bf.is(".first")){bn.click()}})}bg.dblclick(function(){bi()});P.on("closeZoom",bi);function bi(){if(R){aP.turn("updateOptions",{duration:0})}aP.css({visibility:"visible","pointer-events":"all"});aP.stop(true).animate({opacity:1},300,function(){m("turned","false",aP,ar,"zoom")});if(ak){af.css("visibility","visible").stop(true).animate({opacity:1},300)}bg.animate({opacity:0},300,function(){f(this).remove();aD=false;aw.find("ul li.zoom").trigger("mouseout")});u(aP,ar,"exit","zoom");aF.off("click",bi);ar.find("div.zoomed-shadow").stop(true).animate({opacity:0},300,function(){f(this).remove()});ar.find("div.zoomed-shadow-bottom").stop(true).animate({opacity:0},100,function(){f(this).remove()});ar.find("div.zoomed-shadow-top").stop(true).animate({opacity:0},100,function(){f(this).remove()})}function bk(){ar.find("div.zoomed-shadow").stop(true).animate({opacity:0},300,function(){f(this).remove()});ar.find("div.zoomed-shadow-bottom").stop(true).animate({opacity:0},100,function(){f(this).remove()});ar.find("div.zoomed-shadow-top").stop(true).animate({opacity:0},100,function(){f(this).remove()});ar.find("div.fb-page-content.zoomed").animate({opacity:0},100,function(){f(this).remove()})}if(!z&&aU){bg.on("touchmove",function(bz){var bA=bz.originalEvent.touches;if(bq-bA[0].pageY>-bg.children().height()+bg.height()){bg.find(" > div:not(.rfbwp-loader), > a.fb-container").css("margin-top",bq-bA[0].pageY);bg.find("img.bg-img").css("margin-top",bq-bA[0].pageY)}else{bg.find("img.bg-img").css("margin-top",-bg.children().height()+bg.height());bg.find(" > div:not(.rfbwp-loader), > a.fb-container").css("margin-top",-bg.children().height()+bg.height())}})}bg.find(" > div:not(.rfbwp-loader), > a.fb-container").css("position","relative");bg.find("img.bg-img").css("left","0px");bg.on("mousemove touchmove",function(bA){var bC=bg.height(),bB=bg.children(":not(.rfbwp-loader)").height(),bz=(bA.type=="touchmove"?bA.originalEvent.touches[0].pageY:bA.pageY);var bD=(-bB+bC)/-bC,bE=0;if((bq-bz)*bD>-bB+bC){bE=(bq-bz)*bD}else{bE=-bB+bC}bE=Math.max(Math.min(bE,0),bC-bB);bg.find("> div:not(.rfbwp-loader), > a.fb-container").css("margin-top",bE)});bx=bg.position();ar.find("div.zoomed-shadow-top, div.zoomed-shadow-bottom").width(bg.width()).animate({opacity:1},500);ar.find("div.zoomed-shadow-top").css({top:bx.top-13,left:bx.left+br});ar.find("div.zoomed-shadow-bottom").css({top:bx.top+bg.height()-40+(2*br),left:bx.left+br})});var X=ar.data("slide-delay")?parseInt(ar.data("slide-delay")):2000,aV=0;var av=aw.data("menu-type"),aH=aw.data("grouped"),aI=aw.data("prev-icon"),aj=aw.data("next-icon"),aQ="";if(aH){aQ={prev:'<li class="preview'+(!s?" hidden":"")+'" data-icon="'+aI+'"></li>',next:'<li class="next'+(!s?" hidden":"")+'" data-icon="'+aj+'"></li>'}}else{aQ='<div class="next round'+(!s?" hidden":"")+" "+av+'"><i class="'+aj+'"></i></div><div class="preview round'+(!s?" hidden":"")+" "+av+'"><i class="'+aI+'"></i></div>'}if(s||R){if(aH){aw.find(".main-nav").prepend(aQ.prev).append(aQ.next)}else{ar.append(aQ)}}if(aw.hasClass("mobile")){ar.find(".next, .preview").addClass("mobile")}aw.find("ul li").each(function(){var a3=f(this);if(a3.data("icon")){var a1=a3.data("icon"),a2=a3.data("icon-active");if(a1.length==0){if(a3.hasClass("slideshow")){a3.append('<i class="icon-play"></i><i class="icon-pause"></i>')}else{if(a3.hasClass("toc")){a3.append('<i class="icon-list"></i>')}else{if(a3.hasClass("zoom")){a3.append('<i class="icon-search"></i>')}else{if(a3.hasClass("show-all")){a3.append('<i class="icon-layout"></i>')}else{if(a3.hasClass("fullscreen")){a3.append('<i class="icon-resize-full"></i><i class="icon-resize-small"></i>')}}}}}}else{a3.append('<i class="'+a1+'"></i>')}if(a2&&a2.length>0){a3.append('<i class="'+a2+'"></i>')}}else{if(a3.data("text")){var a4=a3.data("text"),a0=a3.data("text-active");a3.append('<i class="text">'+a4+"</i>");if(a0&&a0.length>0){a3.append('<i class="text">'+a0+"</i>")}}}});var ab=aw.find("ul li[data-text]");if(ab.length){var aq=0;ab.each(function(){var a0=f(this);if(aq<a0.width()){aq=a0.width()}});ab.width(aq).height(aq).css("line-height",aq+"px");ar.find(".next, .preview, .show-next, .show-previous, .show-all-next, .show-all-previous").width(aq).height(aq).css("line-height",aq+"px")}aw.find("ul li.toc").on("click",function(a0){if(aP.turn("page")!=L){aP.trigger("mouseover")}if(ak&&!aP.data().fauxCenter){if(aB.parent().is(".rfbwp-left")){aB.click()}else{aK.click()}setTimeout(function(){aP.turn("page",L);y(aP)},300)}else{aP.turn("page",L);y(aP)}});aw.find("ul li.fullscreen").on("click",function(a3){var a2=f(this),a1=ar.siblings(".fb-spacer").length?ar.siblings(".fb-spacer"):ar.before('<div class="fb-spacer"></div>').siblings(".fb-spacer");a2.toggleClass("active");V=!V;E=true;if(V){var a0=ar.data("fullscreen").split("|");a1.css({width:ar.outerWidth(),height:ar.outerHeight()});if(f.isArray(a0)){ad.css({background:convertHex(a0[0],a0[1])});ad.find(".rfbwp-close").attr("data-reverse",a0[2])}else{ad.removeAttr("style");ad.find(".rfbwp-close").removeAttr("data-reverse")}ad.show();a1.show();ad.append(ar);A.css("overflow","hidden");P.trigger("rfbwp.resize")}else{ar.insertBefore(ad);ar.siblings(".fb-spacer").remove();ad.hide();A.css("overflow","");P.trigger("rfbwp.resize")}});P.on("keydown",function(a0){if(a0.keyCode==27&&V){aw.find("ul li.fullscreen").click()}});aw.find("ul li.download").on("click",function(a2){var a1=f(this),a0=a1.attr("data-file");if(!a0.length>0){return}window.location.href=mpcthLocalize.downloadPath+a0});aw.find("ul li.zoom").on("click",function(a0){aP.find("div.turn-page-wrapper").each(function(){var a1=f(this);if(a1.attr("page")==aP.turn("page")&&!aD){a1.trigger("dblclick")}else{if(a1.attr("page")==aP.turn("page")&&aD){ar.find("div.zoomed").trigger("dblclick")}}})});aw.find("ul li.slideshow").on("click",function(a1){if(aP.turn("page")==aP.data().totalPages){return}var a0=f(this);a0.toggleClass("active");at=!at;if(at){if(ak&&!aP.data().fauxCenter){aB.click();setTimeout(function(){clearTimeout(M);aP.turn("next")},X)}else{clearTimeout(M);aP.turn("next")}}else{clearTimeout(M)}m("start","right",aP,ar,"end")});aw.find("ul li.show-all").on("click",function(bB){var bx=aP.height(),bp=aP.width()*(J?0.5:1),bb=12,bt,bi,bj,a7,bf=6,bA=1,a6=10,bk,a9,bh,bw,be=parseInt(f(this).attr("data-cols")),bq=aw.data("grouped"),a5;Y=true;if(isNaN(be)||be==0){be=2}else{be*=2}var bm=parseInt(aP.find(".fb-page-content").css("margin-top"));bw=(G-2*bm)*0.5/(H-bm);aP.turn("stop");ar.append('<div class="show-all"><div class="content"></div><div class="rfbwp-trim-top"></div><div class="rfbwp-trim-bottom"></div></div>');ar.append('<div class="showall-shadow-top"></div><div class="showall-shadow-bottom"></div>');var bn=ar.find("div.show-all"),bC=ar.find(".show-all-next, .show-all-previous").length,a0=aw.data("up-icon")?aw.data("up-icon"):"fa fa-chevron-up",ba=aw.data("down-icon")?aw.data("down-icon"):"fa fa-chevron-down",a3=aw.hasClass("spread")?"spread":"";if(!bC&&bq){aw.find(".alternative-nav").append('<li class="big-next show-all-next"><i class="'+ba+'"></i></li>');aw.find(".alternative-nav").prepend('<li class="big-next show-all-previous"><i class="'+a0+'"></i></li>')}else{if(!bC){ar.append('<div class="big-next show-all-next '+a3+'"><i class="'+ba+'"></i></div>');ar.append('<div class="big-next show-all-previous '+a3+'"><i class="'+a0+'"></i></div>')}}var a2=aw.find("ul li[data-text]");if(a2.length){var bg=0;a2.each(function(){var bE=f(this);if(bg<bE.width()){bg=bE.width()}});ar.find(".big-next").width(bg).height(bg).css("line-height",bg+"px")}f(window).width()<=1024?aT(ar):aM(ar);bA=2;aP.find("div.fb-page-content").each(function(){var bE=f(this);if(!bE.parent().parent().hasClass("fpage")){bk=bE.clone(true).addClass("show-all-thumb");bk.find("img.bg-img.zoom-large").remove();bk.attr("style","");if(bE.parent().parent().parent().hasClass("last")){bk.addClass("even")}else{if(bE.parent().parent().parent().hasClass("first")){bk.addClass("odd")}}if(bE.parent().hasClass("double")){bk.addClass("double")}if(bE.parent().parent().parent().hasClass("last")){bn.find("div.content").prepend(bk)}else{bn.find("div.content").append(bk)}bA++}});bb=parseInt(bn.find("div.content").css("top"));bt=parseInt(bn.find("div.show-all-thumb").css("margin-bottom"));bi=parseInt(bn.find("div.show-all-thumb.odd").css("margin-right"));bj=parseInt(bn.find("div.show-all-thumb").css("height"));a7=parseInt(bn.find("div.show-all-thumb").css("width"));a9=bj/bx;var a1=((bp-bb*2-bi*(be/2-1))/be)>>0,a8=(a1/bw)>>0;bn.find("div.show-all-thumb").css({width:a1,height:a8});while(ar.height()<=((bb*2)+(bf*(a8+bt))-bt)){bf--}var bs=bn.find("div.show-all-thumb").length;bf=Math.min(Math.ceil(bs/a6),bf);bh=a8*bf+bb*2+bt*bf-bt;bn.width(bp).height(bh);if(bn.height()>bn.find(".content").height()){ar.find(".show-all-previous, .show-all-next").removeClass("active")}else{ar.find(".show-all-previous, .show-all-next").addClass("active")}a5=(ar.height()-bn.outerHeight()-(aw.hasClass("aside")?0:aw.height()))*0.5;bn.css("top",a5);a6=be;bA=1;var bo=a8/(H-bm*2);bo*=1.04;bn.find("div.show-all-thumb").each(function(){var bE=f(this);if(bA%a6==0){bE.addClass("last-thumb")}bA++;r(bE,bo);bE.prepend('<span class="shadow"></span>');bE.find("div.video").remove()});aP.animate({opacity:0},500,function(){aP.css("visibility","hidden")});if(ak){af.animate({opacity:0},500,function(){af.css("visibility","hidden")})}aP.css("pointer-events","none");bn.animate({opacity:1},500);bn.css({left:(ar.width()-bn.width())*0.5+"px"});var a4=parseInt(bn.css("left").replace("px","")),by=a4+parseInt(bn.outerWidth()),br=ar.find("div.show-all-previous"),bz=ar.find("div.show-all-next"),bc=ar.find(".fb-nav").hasClass("spread")?br.outerWidth()*0.33+20:0;bc=ar.hasClass("nav-with-cover")?bc+10:bc;br.css({left:a4-br.outerWidth()-bc,"margin-top":-(br.outerHeight())*0.5});bz.css({left:by+bc,"margin-top":-(bz.outerHeight())*0.5});u(aP,ar,"show","show-all");bn.find("div.show-all-thumb").hover(function(){var bE=f(this);bE.find("span.shadow");bE.find("span.shadow").stop(true).animate({opacity:0.5},300);if(bE.hasClass("even")){bE.next().find("span.shadow");bE.next().find("span.shadow").stop(true).animate({opacity:0.5},300)}else{bE.prev().find("span.shadow");bE.prev().find("span.shadow").stop(true).animate({opacity:0.5},300)}},function(){var bE=f(this);bE.find("span.shadow").stop(true).animate({opacity:0},300);if(bE.hasClass("even")){bE.next().find("span.shadow");bE.next().find("span.shadow").stop(true).animate({opacity:0},300)}else{bE.prev().find("span.shadow");bE.prev().find("span.shadow").stop(true).animate({opacity:0},300)}});var bu=bn.position();ar.find("div.showall-shadow-top, div.showall-shadow-bottom").width(bn.width()).delay(500).animate({opacity:1},500);ar.find("div.showall-shadow-top").css({top:bu.top-12,left:bu.left});ar.find("div.showall-shadow-bottom").css({top:bu.top+bn.height()-39,left:bu.left});bn.find("div.show-all-thumb").on("click",function(){var bE=f(this),bF=Math.ceil(bE.index());if(ak&&!aP.data().fauxCenter){aB.click()}if(am&&bF<2){bF=2}aP.trigger("mouseover");y(aP);aP.turn("page",bF);n(bF,aP,ar,"left");bn.animate({opacity:0},300,function(){f(this).remove()});ar.find("div.showall-shadow-bottom").animate({opacity:0},100,function(){f(this).remove()});ar.find("div.showall-shadow-top").animate({opacity:0},100,function(){f(this).remove()});aP.css("visibility","visible");aP.stop(true).animate({opacity:1},300);if(ak){af.css("visibility","visible");af.stop(true,true).animate({opacity:1},300)}u(aP,ar,"exit","show-all");if(bF<2){aP.find("div.fb-shadow-bottom-left").css("opacity",0);aP.find("div.fb-shadow-top-left").css("opacity",0)}aP.css("pointer-events","all");P.off("keydown",bd);Y=false});var bv=bn.find("div.content"),bl=bh-bb*2+bt,bD=false;ar.find(".show-all-previous").on("click",function(){if(parseInt(bv.css("top"))!=bb&&!bD){bD=true;bv.stop(true).animate({top:Math.min((parseInt(bv.css("top"))+bl),bb)},1000,"easeOutExpo",function(){bD=false})}});ar.find(".show-all-next").on("click",function(){if(parseInt(bv.css("top"))-bl>12-bv.height()&&!bD){bD=true;bv.stop(true).animate({top:(parseInt(bv.css("top"))-bl)},1000,"easeOutExpo",function(){bD=false})}});function bd(bE){if(bE.keyCode==38){ar.find(".show-all-previous").trigger("click");bE.preventDefault()}else{if(bE.keyCode==40){ar.find(".show-all-next").trigger("click");bE.preventDefault()}else{if(bE.keyCode==27){aw.find(".show-all-close").trigger("click");bE.preventDefault()}}}}P.on("keydown",bd);aw.find(".show-all-close").on("click",function(){bn.animate({opacity:0},300,function(){f(this).remove()});ar.find("div.showall-shadow-bottom").animate({opacity:0},100,function(){f(this).remove()});ar.find("div.showall-shadow-top").animate({opacity:0},100,function(){f(this).remove()});aP.css("visibility","visible");aP.animate({opacity:1},300);if(ak){af.css("visibility","visible");af.stop(true,true).animate({opacity:1},300)}u(aP,ar,"exit","show-all");aP.find("div.fb-shadow-bottom-left").css("opacity",0);aP.find("div.fb-shadow-top-left").css("opacity",0);aP.css("pointer-events","all");P.off("keydown",bd);Y=false})});if(aw.hasClass("aside")&&!z){aw.css({"margin-top":-(aw.height()*0.5)+"px"});if(aw.hasClass("left")&&ar.parent().is("#rfbwp_fullscreen")){aw.css({left:-aw.width()-80})}else{if(ar.parent().is("#rfbwp_fullscreen")){aw.css({left:ar.width+aw.width()+80})}}}ar.find(".next").on("click",aY);ar.find(".preview").on("click",aA);function aY(a1){if(an){return}if(J&&o=="left"){o="right";var a0=aP.turn("page");I(a0,aP,ar,"left");return}ap="right";aP.trigger("mouseover");if(ak){if(aP.data().fauxCenter){if(aP.turn("page")==aP.data().totalPages){aP.trigger("cover-back")}else{aP.turn("next")}}else{aP.trigger("cover-front")}}else{aP.turn("next")}}function aA(a1){if(an){return}if(J&&o=="right"){o="left";var a0=aP.turn("page");I(a0,aP,ar,"right");return}ap="left";aP.trigger("mouseover");if(ak){if(aP.data().fauxCenter){if(aP.turn("page")==1){aP.trigger("cover-front")}else{aP.turn("previous")}}else{aP.trigger("cover-back")}}else{aP.turn("previous")}}function aT(a1){var bc=a1.find(".fb-nav").data("grouped"),a4=a1.find(".fb-nav").hasClass("consolidated");if(bc){return false}var a0=a1.find(".main-nav"),a9=a1.find(".alternative-nav"),bb=a1.find("div.next"),ba=a1.find("div.preview"),be=a1.find("div.show-next"),bd=a1.find("div.show-prev"),a6=a1.find("div.show-all-next"),a5=a1.find("div.show-all-previous");a1.find(".fb-nav").addClass("consolidated");if(bb.length&&ba.length){var bh='<li class="next'+(!s?" hidden":"")+'">'+bb.html()+"</li>",bf='<li class="preview'+(!s?" hidden":"")+'">'+ba.html()+"</li>";bb.addClass("_next").removeClass("next").hide();ba.addClass("_preview").removeClass("preview").hide();if(!a0.find("li.next, li.preview").length){a0.prepend(bf).append(bh)}a0.find(".preview").on("click",aA);a0.find(".next").on("click",aY)}if(be.length&&bd.length){var a8='<li class="big-side show-next">'+be.html()+"</li>",a7='<li class="big-side show-previous">'+bd.html()+"</li>";be.addClass("_show-next").removeClass("show-next").hide();bd.addClass("_show-previous").removeClass("show-previous").hide();if(!a9.find("li.show-next, li.show-previous").length){a9.prepend(a7).append(a8)}}if(a6.length&&a5.length){var bi='<li class="big-next show-all-next">'+a6.html()+"</li>",bg='<li class="big-next show-all-previous">'+a5.html()+"</li>";a6.addClass("_show-all-next").removeClass("show-all-next").hide();a5.addClass("_show-all-previous").removeClass("show-all-previous").hide();if(!a9.find("li.show-all-next, li.show-all-previous").length){a9.prepend(bg).append(bi)}}var a2=aw.find("ul li[data-text]");if(a2.length){var a3=0;a2.each(function(){var bj=f(this);if(a3<bj.width()){a3=bj.width()}});a1.find(".big-side, .big-next, .next, .preview").width(a3).height(a3).css("line-height",a3+"px")}}function aM(a4){var bg=a4.find(".fb-nav").data("grouped"),a8=a4.find(".fb-nav").hasClass("consolidated");if(bg){return false}if(!a8){return false}var a2=a4.find(".main-nav"),bd=a4.find(".alternative-nav"),bf=a4.find("._next"),be=a4.find("._preview"),bi=a4.find("._show-next"),bh=a4.find("._show-previous"),ba=a4.find("._show-all-next"),a9=a4.find("._show-all-previous");a4.find(".fb-nav").removeClass("consolidated");if(bf.length&&be.length){var a6=a4.find(".next"),a3=a4.find(".preview");a6.remove();a3.remove();bf.addClass("next").removeClass("_next").show();be.addClass("preview").removeClass("_preview").show();bf.find(".preview").on("click",aA);be.find(".next").on("click",aY)}if(bi.length&&bh.length){var a1=a4.find(".show-next"),a0=a4.find(".show-previous");a1.remove();a0.remove();bi.addClass("show-next").removeClass("_show-next").show();bh.addClass("show-previous").removeClass("_show-previous").show()}if(ba.length&&a9.length){var bc=a4.find(".show-all-next"),bb=a4.find(".show-all-previous");bc.remove();bb.remove();ba.addClass("show-all-next").removeClass("_show-all-next").show();a9.addClass("show-all-previous").removeClass("_show-all-previous").show()}var a5=aw.find("ul li[data-text]");if(a5.length){var a7=0;a5.each(function(){var bj=f(this);if(a7<bj.width()){a7=bj.width()}});a4.find(".big-side, .big-next, .next, .preview").width(a7).height(a7).css("line-height",a7+"px")}}function aL(a1,a0){if(!z){aP.turn("updateOptions",{cornerSize:100})}if(a1==1){if(a0=="open"){af.removeClass("rfbwp-left rfbwp-right");af.addClass("rfbwp-both");setTimeout(function(){aB.addClass("rfbwp-side-right").removeClass("rfbwp-side-left")},150)}else{af.removeClass("rfbwp-left rfbwp-both rfbwp-right");af.addClass("rfbwp-left");aP.turn("updateOptions",{cornerSize:1});setTimeout(function(){aB.addClass("rfbwp-side-left").removeClass("rfbwp-side-right")},150)}}else{if(a1==aP.data().totalPages){if(a0=="open"){af.removeClass("rfbwp-left rfbwp-right");af.addClass("rfbwp-both");setTimeout(function(){aK.addClass("rfbwp-side-left").removeClass("rfbwp-side-right")},150)}else{af.removeClass("rfbwp-left rfbwp-both");af.addClass("rfbwp-right");aP.turn("updateOptions",{cornerSize:1});setTimeout(function(){aK.addClass("rfbwp-side-right").removeClass("rfbwp-side-left")},150)}}else{af.removeClass("rfbwp-left rfbwp-right");af.addClass("rfbwp-both")}}}function aa(a0){if(a0==1){ar.attr("data-display","front")}else{if(a0==aP.data().totalPages){ar.attr("data-display","back")}else{ar.attr("data-display","inside")}}}function ai(a0){aS=f(this);az=aS.parent().is(".rfbwp-front")?"front":"back";if(aS[0]==aB[0]&&aP.turn("page")!=1){return}if(aS[0]==aK[0]&&aP.turn("page")!=aP.data().totalPages){return}if(aS[0]==aB[0]&&aP.data().fauxCenter){P.trigger("rfbwp-disable-corners")}if(aS[0]==aK[0]&&aP.data().fauxCenter){P.trigger("rfbwp-disable-corners")}Z=a0.clientX;if(aP.data().fauxCenter){if(aS[0]==aB[0]){ar.find(".preview").stop(true,true).animate({opacity:0}).css("display","none")}else{ar.find(".next").stop(true,true).animate({opacity:0}).css("display","none")}}P.one("mouseup",al);P.on("mousemove",ae)}function ae(a0){aJ=(a0.clientX-Z)*0.25;if(aS.is(".rfbwp-active")){aJ-=180}if(aJ>0){aJ=0}if(aJ<-180){aJ=-180}if(aJ/90<-1){aS.addClass("rfbwp-side-right").removeClass("rfbwp-side-left")}else{aS.addClass("rfbwp-side-left").removeClass("rfbwp-side-right")}aS.css("transform","rotateY("+aJ+"deg)")}function al(a0){aS.css("transform","");aS.addClass("rfbwp-anim");if(aS[0]==aB[0]&&aP.data().fauxCenter){P.trigger("rfbwp-update-corners")}if(aS[0]==aK[0]&&aP.data().fauxCenter){P.trigger("rfbwp-update-corners")}if(aS.is(".rfbwp-active")||aS.is(".rfbwp-back:not(.rfbwp-active)")){if(aJ>-90){aP.trigger("cover-"+az)}}else{if(aJ<-90){aP.trigger("cover-"+az)}}setTimeout(function(){aS.removeClass("rfbwp-anim")},300);if(aP.data().fauxCenter){if(aS[0]==aB[0]){ar.find(".preview").stop(true,true).css("display","inline-block").animate({opacity:1})}else{ar.find(".next").stop(true,true).css("display","inline-block").animate({opacity:1})}}P.off("mousemove",ae)}function ac(){if(aC){return}if(aP.turn("page")==1){aC=true;aB.addClass("rfbwp-anim");if(aB.is(".rfbwp-active")){aL(aP.turn("page"),"close");aP.data().fauxCenter=false;aP.trigger("faux-turning",[1])}else{aL(aP.turn("page"),"open");aP.data().fauxCenter=true;aP.trigger("faux-turning",[2])}setTimeout(function(){aC=false;aB.removeClass("rfbwp-anim")},600);aB.toggleClass("rfbwp-active")}}function au(){if(aC){return}if(aP.turn("page")==aP.data().totalPages){aC=true;aK.addClass("rfbwp-anim");if(!aK.is(".rfbwp-active")){aL(aP.turn("page"),"close");aP.data().fauxCenter=false;aP.trigger("faux-turning",[aP.data().totalPages])}else{aL(aP.turn("page"),"open");aP.data().fauxCenter=true;aP.trigger("faux-turning",[aP.data().totalPages-2])}setTimeout(function(){aC=false;aK.removeClass("rfbwp-anim")},600);aK.toggleClass("rfbwp-active").trigger("back-cover-turned")}}function aZ(){var a0=(aw.is(".top")?aw.outerHeight():0)+(aw.is(".spread.top")?30:0),a1=aw.is(".top")?parseInt(aw.css("margin-top")):parseInt(aP.css("margin-top"));af.css({width:Math.ceil(aP.width()*0.5)+10,height:aP.height()+20,top:z?a1:-10,left:J?0:ar.width()*0.25+15,marginTop:a0});if(A.is(".ie9")){af.css("margin-top",a1>10?a1+a0:10)}}var af=ar.find(".rfbwp-cover-wrap"),aB=ar.find(".rfbwp-front .rfbwp-cover"),aK=ar.find(".rfbwp-back .rfbwp-cover"),aC,aS,Z,aJ,az;if(af.length){ak=true;af.addClass("rfbwp-left");aZ();P.on("resize",aZ);if(am){aL(3,"open");aa(3);aP.data().fauxCenter=true}else{aa(1)}aK.addClass("rfbwp-side-left");if(aP.turn("page")==1){aB.addClass("rfbwp-side-left")}else{aB.addClass("rfbwp-side-right")}aP.on("cover-front",ac);aP.on("cover-back",au);aB.on("click",ac);aK.on("click",au);aP.on("turning",function(a1,a0){aC=true;if(a0!=1&&a0!=aP.data().totalPages){aa(a0)}});aP.on("turned",function(a1,a0){aC=false;aa(a0)});aB.on("dragstart",function(a0){a0.preventDefault()});aK.on("dragstart",function(a0){a0.preventDefault()});aB.on("mousedown",ai);aK.on("mousedown",ai);aP.on("pressed",function(){ar.attr("data-display","inside")});aP.on("released",function(){if(aP.turn("page")==1){ar.attr("data-display","front")}else{if(aP.turn("page")==aP.data().totalPages){ar.attr("data-display","back")}}})}x(aP);D(aP,ar);G=parseInt(aP.attr("data-fb-w"))*2;H=parseInt(aP.attr("data-fb-h"));aP.find("div.fb-page-content .page-html *:not(.no-scale), div.fb-page-content .mpc-numeration-wrap span").each(function(){var a2=f(this);if(a2.is("img")){a2.data("_scale",{width:a2.attr("width")?parseInt(a2.attr("width")):parseInt(a2.width()),"margin-top":parseInt(a2.css("margin-top")),"margin-right":parseInt(a2.css("margin-right")),"margin-bottom":parseInt(a2.css("margin-bottom")),"margin-left":parseInt(a2.css("margin-left")),"padding-top":parseInt(a2.css("padding-top")),"padding-right":parseInt(a2.css("padding-right")),"padding-bottom":parseInt(a2.css("padding-bottom")),"padding-left":parseInt(a2.css("padding-left"))})}else{if(a2.parent().hasClass("mpc-numeration-wrap")){a2.data("_scale",{"font-size":parseInt(a2.css("font-size")),"line-height":parseInt(a2.css("line-height")),"margin-top":parseInt(a2.css("margin-top")),"margin-right":parseInt(a2.css("margin-right")),"margin-bottom":parseInt(a2.css("margin-bottom")),"margin-left":parseInt(a2.css("margin-left")),"padding-top":parseInt(a2.css("padding-top")),"padding-right":parseInt(a2.css("padding-right")),"padding-bottom":parseInt(a2.css("padding-bottom")),"padding-left":parseInt(a2.css("padding-left")),"border-width":parseInt(a2.css("border-width")),"border-radius":parseInt(a2.css("border-radius"))})}else{var a0=parseInt(a2.css("font-size")),a1=a2.css("line-height");if(a1.indexOf("px")==-1){a1*=a0}a2.data("_scale",{"font-size":a0,"line-height":parseInt(a1)})}}});aP.find("div.fb-page-content .page-html .rfbwp-page-link").on("click",function(a0){a0.preventDefault();var a1=f(this),a2=parseInt(a1[0].hash.replace("#",""),10);if(!isNaN(a2)){a2=Math.min(aP.data().totalPages,Math.max(a2,0));aP.turn("page",a2)}});aP.on("turned",function(a2,a1,a0){T(aP);return false});aP.on("turning",function(a1,a0){var a2=a0%2?"left":"right";if(J){I(a0,aP,ar,a2)}});aP.find("div.turn-page-wrapper.even").addSwipeEvents().on("swipeleft",function(a1,a2){if(J){o="right";var a0=aP.turn("page");I(a0,aP,ar,"left")}});aP.find("div.turn-page-wrapper.odd").addSwipeEvents().on("swiperight",function(a1,a2){if(J){o="left";var a0=aP.turn("page");I(a0,aP,ar,"right")}});aP.on("rfbwp.close",function(){if(ar.find("div.show-all").length){ar.find(".alternative-nav .show-all-close").trigger("click")}ap="left";aP.children("div.fb-shadow-top-right").animate({opacity:0},200).addClass("_fb-shadow-top-right").removeClass("fb-shadow-top-right");aP.children("div.fb-shadow-bottom-right").animate({opacity:0},200).addClass("_fb-shadow-bottom-right").removeClass("fb-shadow-bottom-right");aP.children("div.fb-shadow-top-left").animate({opacity:0},200).addClass("_fb-shadow-top-left").removeClass("fb-shadow-top-left");aP.children("div.fb-shadow-bottom-left").animate({opacity:0},200).addClass("_fb-shadow-bottom-left").removeClass("fb-shadow-bottom-left");var a0=0;if(ak){if(!aP.data().fauxCenter){if(aP.turn("page")==aP.data().totalPages){a0+=1600;aP.trigger("cover-back");setTimeout(function(){ar.attr("data-display","inside");aP.one("turned",function(){aP.trigger("cover-front")});aP.turn("page",1)},500)}}else{if(aP.data().fauxCenter){if(aP.turn("page")==1){a0+=500;aP.trigger("cover-front")}else{a0+=1100;ar.attr("data-display","inside");aP.one("turned",function(){aP.trigger("cover-front")});aP.turn("page",1)}}}}else{if(aP.turn("page")==aP.data().totalPages){a0+=1200;aP.trigger("mouseover");aP.turn("previous");aP.one("turned",function(){ap="left";aP.trigger("mouseover");aP.turn("page",1)})}else{if(aP.turn("page")!=1){a0+=600;aP.turn("page",1)}}}setTimeout(function(){P.trigger("rfbwp.closed");aP.children("div._fb-shadow-top-right").addClass("fb-shadow-top-right").removeClass("_fb-shadow-top-right");aP.children("div._fb-shadow-bottom-right").addClass("fb-shadow-bottom-right").removeClass("_fb-shadow-bottom-right");aP.children("div._fb-shadow-top-left").addClass("fb-shadow-top-left").removeClass("_fb-shadow-top-left");aP.children("div._fb-shadow-bottom-left").addClass("fb-shadow-bottom-left").removeClass("_fb-shadow-bottom-left")},a0);if(aD){-P.trigger("closeZoom")}});P.on("rfbwp.resize resize",function(){var a3=f(this),a7=aP.turn("page"),bb=a3.width(),be=ar.find("div.next"),bc=ar.find("div.preview"),a5,a2,ba,bi,bf,a8,bg,a9,bd=parseInt(aw.css("margin-top"))+parseInt(aw.css("margin-bottom"))+parseInt(aw.css("top"))+aw.height()+40,a1=parseInt(aP.css("margin-top"))+parseInt(aP.css("margin-bottom"))+aP.height()+bd,bj=aP.position(),a6=ar.parent().is("#rfbwp_fullscreen, .rfbwp-shelf-wrap, .rfbwp-popup-wrap");if(bb<=768){z=true;s=false;be.hide();bc.hide();aP.turn("updateOptions",{cornerSize:1});ar.css("overflow","hidden")}else{z=false;if(aP.turn("page")==1&&ak){aP.turn("updateOptions",{cornerSize:1})}else{aP.turn("updateOptions",{cornerSize:100})}ar.css("overflow","");if(!aP.is(".no-arrows")&&!aD){s=true;be.show();bc.show()}}f(window).width()<=1024?aT(ar):aM(ar);var bk=aw.hasClass("top")?aw.height():"0";bk=aw.hasClass("spread")?bk+30:bk;be.css("margin-top",bk);bc.css("margin-top",bk);if(a6&&z&&P.width()>P.height()){aw.find("li").css({"margin-bottom":aw.find("li").css("margin-right")});aw.removeClass("bottom").addClass("aside").removeClass("_aside")}else{if(aw.hasClass("_aside")){aw.addClass("bottom").removeClass("aside").addClass("_aside").css({"margin-top":"","margin-bottom":""})}else{if(aw.hasClass("aside")&&z){aw.removeClass("aside").addClass("mobile-aside")}else{if(!z&&aw.hasClass("mobile-aside")){aw.removeClass("mobile-aside").addClass("aside")}}}}a9=aw.is(".aside")?0:aw.outerHeight()+(aw.is(".spread")?20:0);a2=G;ba=H;bi=ar.width()-(ak?20:0);bf=ar.parent().height()-a9-(ak?20:0);a8=P.height()-a9-(ak?20:0);if(bf>a8||!a6){bf=a8}if(a2>bi){var bh=bi/a2;a2=a2*bh>>0;ba=ba*bh>>0}J=false;if(a2*1.25<G&&bi<600){J=true;a2=a2*2;ba=ba*2}if(ba>bf){a5=a2/ba;a2=bf*a5>>0;ba=bf>>0}if(a2%2==1){a2-=1}if(z&&a2<G*0.5){aw.find("ul li.zoom").remove()}if(z){aw.find("ul li.fullscreen").remove()}if(a6&&ba<=ad.height()){var a4=(a8-ba-60+(ak?20:0))*0.5-(z?10:0);if(aw.hasClass("top")){aw.css("margin-top",a4)}else{aP.css("margin-top",a4)}if(A.is(".ie9")){ar.find("div.preview, div.next").css("top",ba*0.5+a4);if(ak){aZ()}}}else{if(aw.hasClass("top")){aw.css("margin-top",0)}else{aP.css("margin-top",0)}}if(a2!=aP.width()||ba!=aP.height()){B(a2,ba,aP,ar,aD,H)}bg=aP.height()/H;r(aP,bg);bb=a3.width();if((a7==1||a7==aP.data().totalPages)&&!aP.data().fauxCenter){var a0=Math.floor((ar.width()-aP.width()*0.5)*0.5);if(a7==1){a0-=aP.width()*0.5}}else{var a0=Math.floor((ar.width()-aP.width())*0.5)}if(parseInt(aP.css("left"))!=a0){aP.css("left",a0)}if(ak){af.css("left",J?0:a0+a2*0.5)}if(aD){if(aP.turn("page")==1){a0+=a2*0.25}else{if(aP.turn("page")==aP.data().totalPages){a0-=a2*0.25}}ar.children("div.zoomed").css({left:a0});ar.children("div.zoomed-shadow, div.zoomed-shadow-bottom, div.zoomed-shadow-top").css({left:a0});if(z){P.trigger("closeZoom")}}n(a7,aP,ar,ap)});P.on("keydown",function(a2){if(Y||aE){return}if(a2.keyCode==37){if(an){return}if(aD){var a1=ar.find(".big-side.show-previous");if(!a1.is(":hidden")){a1.click()}}else{ap="left";aP.trigger("mouseover");if(ak){if(aP.data().fauxCenter){if(aP.turn("page")==1){aP.trigger("cover-front")}else{aP.turn("previous")}}else{aP.trigger("cover-back")}}else{aP.turn("previous")}}}else{if(a2.keyCode==39){if(an){return}if(aD){var a0=ar.find(".big-side.show-next");if(!a0.is(":hidden")){a0.click()}}else{ap="right";aP.trigger("mouseover");if(ak){if(aP.data().fauxCenter){if(aP.turn("page")==aP.data().totalPages){aP.trigger("cover-back")}else{aP.turn("next")}}else{aP.trigger("cover-front")}}else{aP.turn("next")}}}else{if(a2.keyCode==27){aP.css({visibility:"visible","pointer-events":"all"});if(ak){af.css("visibility","visible").stop(true).animate({opacity:1},300)}aP.stop(true).animate({opacity:1},300,function(){m("turned","false",aP,ar,"zoom")});ar.find("div.zoomed").animate({opacity:0},300,function(){f(this).remove();aD=false;aw.find("ul li.zoom").trigger("mouseout")});u(aP,ar,"exit","zoom");u(aP,ar,"exit","show-all");ar.find("div.zoomed-shadow").stop(true).animate({opacity:0},300,function(){f(this).remove()});ar.find("div.zoomed-shadow-bottom").stop(true).animate({opacity:0},100,function(){f(this).remove()});ar.find("div.zoomed-shadow-top").stop(true).animate({opacity:0},100,function(){f(this).remove()});ar.find("div.show-all").stop(true).animate({opacity:0},300,function(){f(this).remove()});ar.find("div.showall-shadow-bottom").stop(true).animate({opacity:0},100,function(){f(this).remove()});ar.find("div.showall-shadow-top").stop(true).animate({opacity:0},100,function(){f(this).remove()})}}}}).on("hashchange",function(){D(aP,ar)}).on("touchstart",function(a1){var a0=a1.originalEvent.touches;if(a0[0]){touchStart={x:a0[0].pageX,y:a0[0].pageY}}touchEnd=null}).on("touchmove",function(a1){var a0=a1.originalEvent.touches,a2=aP.offset();if(a0[0].pageX>a2.left&&a0[0].pageY>a2.top&&a0[0].pageX<a2.left+aP.width()&&a0[0].pageY<a2.top+aP.height()){if(a0[0]){touchEnd={x:a0[0].pageX,y:a0[0].pageY}}}}).on("touchend",function(a1){if(ak&&!aP.data().fauxCenter){return}if(window.touchStart&&window.touchEnd){var a0=aP.width()*0.5,a2={x:touchEnd.x-touchStart.x,y:touchEnd.y-touchStart.y},a3={x:touchStart.x-aP.offset().left,y:touchStart.y-aP.offset().top};if(Math.abs(a2.y)<100){if(an){return}if(a2.x>100&&a3.x<a0){aP.turn("previous")}else{if(a2.x<-100&&a3.x>a0){aP.turn("next")}else{if(ak&&a2.x>100&&a3.x>a0&&aP.data().fauxCenter){aP.trigger("cover-front")}else{if(ak&&a2.x<-100&&a3.x<a0&&aP.data().fauxCenter){aP.trigger("cover-back")}}}}}}}).on("start",function(a1,a0){if(R){aP.find("div.fpage object").css({display:"none"});aP.find("div.video object").css({display:"none"})}else{aP.find("div.fpage object").css({opacity:0})}m("start",ap,aP,ar,"start");aW=true}).on("end",function(a0){if(R){aP.find("div.fpage object").css({display:"block"});aP.find("div.video object").css({display:"block"})}else{aP.find("div.fpage object").css({opacity:1})}m("turned","false",aP,ar,"end");aW=false;limiter=0});P.on("rfbwp.refocus-flipbook",function(){if(_rfbwp_focused_flipbook!=aP[0].id){aE=true}else{aE=false}});ar.on("mousedown mouseenter",function(){if(_rfbwp_focused_flipbook!=aP[0].id){_rfbwp_focused_flipbook=aP[0].id;P.trigger("rfbwp.refocus-flipbook")}});f(".flipbook-container").first().trigger("mouseenter");B(G,H,aP,ar,aD,H);K(aP,ar)}j(v)}b();f(window).on("rfbwp.shelf rfbwp.popup",b);f(window).on("rfbwp.init",c)})(jQuery);var _rfbwp_focused_flipbook;